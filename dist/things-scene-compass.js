!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@hatiolab/things-scene")):"function"==typeof define&&define.amd?define(["exports","@hatiolab/things-scene"],t):t((e=e||self)["things-scene-compass"]={},e.scene)}(this,function(e,t){"use strict";const l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"value",name:"value",property:"value"}]};class a extends t.Ellipse{_draw(e){var{value:t=0,fillStyle:l,cx:a,cy:i,rx:s,ry:n}=this.model;e.translate(a,i),e.beginPath(),e.ellipse(0,0,Math.abs(s),Math.abs(n),0,0,2*Math.PI),e.ellipse(0,0,Math.abs(.75*s),Math.abs(.75*n),0,2*Math.PI,0,!0),this.drawStroke(e),this.drawFill(e),e.closePath(),e.beginPath(),e.moveTo(.65*s,0),e.lineTo(0,.09*n),e.lineTo(.65*-s,0),e.lineTo(0,.09*-n),e.moveTo(0,.65*n),e.lineTo(.09*s,0),e.lineTo(0,.65*-n),e.lineTo(.09*-s,0),e.fillStyle=l,e.fill(),e.closePath(),e.beginPath(),e.fillStyle="black",e.font=(s+n)/13+"px arial",e.textBaseline="middle",e.textAlign="center",e.fillText("N",0,.125*n-n),e.fillText("S",0,n-.125*n),e.fillText("W",.125*s-s,0),e.fillText("E",s-.125*s,0),e.beginPath();var o=(t+(this._anim_alpha||0))/50*Math.PI;e.rotate(o),e.moveTo(0,.65*-n),e.lineTo(.13*s,0),e.lineTo(.13*-s,0),e.fillStyle="#F53B3B",e.fill(),e.beginPath(),e.moveTo(0,.65*n),e.lineTo(.13*s,0),e.lineTo(.13*-s,0),e.fillStyle="#3DC0E8",e.fill(),e.rotate(-o),e.beginPath(),e.ellipse(0,0,Math.abs(.15*s),Math.abs(.15*n),0,0,2*Math.PI),e.lineWidth=.013*(s+n),e.strokeStyle="#FFFFFF",e.fillStyle="#3DC0E8",e.fill(),e.stroke(),e.beginPath(),e.ellipse(0,0,Math.abs(.06*s),Math.abs(.06*n),0,0,2*Math.PI),e.fillStyle="#FFFFFF",e.fill(),e.closePath(),e.translate(-a,-i)}_post_draw(e){this.drawText(e)}onchange(e,t){if(e.hasOwnProperty("value")){var l=this,a=e.value-t.value;this._anim_alpha=-a,this.animate({step:function(e){l._anim_alpha=a*(e-1),l.invalidate()},duration:1e3,delta:"elastic",options:{x:2},ease:"out"}).start()}}get nature(){return l}}t.Component.register("compass",a),e.Compass=a,Object.defineProperty(e,"__esModule",{value:!0})});
